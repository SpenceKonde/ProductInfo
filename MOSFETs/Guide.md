# Guide to MOSFETs
MOSFETs are by far the most popular component for switching DC power under the control of a microcontroller or any low power DC source. Despite this, there is a great deal of misinformation, misunderstanding, and poor advice in Hobby and Arduino circles. The questions I routinely receive from customers has made clear that a great many people are using these parts without a full understanding of what they are, how they work, how to select them, or whether they can do what is asked of them. What is presented here is by no means intended to be an exhausive explanation; rather, it is simply a primer from a very practical perspective on selection of these parts for common microcontroller projects. This document describes N-channel and P-channel enhancement mode MOSFETs for the purpose of switching. "depletion mode" MOSFETs and advanced uses of MOSFETs are beyond the scope of this guide.

## What a MOSFET is for
Simply put, a MOSFET allows a low voltage, low current signal to trun on and off a higher voltage and/or higher current load. An example of such a load might be a collection of LED lights in a room, pumps for outdoor applications, or a motor on a scooter. MOSFETs are only suitable for switching DC power, and similarly require a DC (including PWM) signal which **shares a common reference** with the MOSFET (typically ground). 

## The very basics
A MOSFET is controlled by the voltage difference between the Gate and the Source, Vgs. Enhancement mode MOSFETs (by far the most common) are "off" when this is 0V, applying a voltage to the gate will allow current to flow from the source to the drain - however, regardless of being on or off, there is an intrinsic diode between the drain and source - put another way, MOSFETs only block current in one direction (though while "off" this diode has a typical diode drop, while when "on", it will have the low resistance of the MOSFET in it's on state).  All MOSFETs will have an Rds(on) specified for at least one Vgs, and usually multiple. This is the on-state resistance (the resistance when the MOSFET is "on"); for modern power MOSFETs, this is usually on the order of milliohms. The lowest Vgs for which an Rds(on) is specified is the lowest drive voltage that should be used with that MOSFET. Below that, though the MOSFET may conduct, it will only be "partially on", with a much higher Rds; used in this way, it drop more voltage, and accordingly create more heat (sometimes much more!) than it would when used with an appropriate gate voltage. 

### N-channel, P-channel
There are two basic types of MOSFETs - P-channel and N-channel. N-channel MOSFETs are most common - any given level of performance, the N-channel MOSFETs will always be cheaper than a comparable P-channel one (for manufacturing reasons, N-channel devices are easier to make) - fortunately, they are also the type that is easier to control, as can be seen below. 

#### N-channel MOSFETs
N-channel MOSFETs switch the "low side" of a load. They are typically used with Source tied to ground, and Drain tied to the low side of the load. When a positive voltage is applied to the gate relative to the source, the MOSFET is turned on. Because the gate voltage need only be a few volts higher than the source, it is easy to control these parts with the output of a typical microcontroller, which would output between 3.3v and 5v as a "HIGH".

Because N-channel MOSFETs typically have markedly higher performance, schemes have been devised to use them even to drive the "high side" - these schemes generally require that the MOSFET be continually switched to function; the usual scheme is to use the regular swings of the voltage on the drain to charge a capacitor which provides the higher voltage to switch it. While use of such devices is beyond the scope of this guide, the important takeaway is that a MOSFET driver which uses such a "bootstrap" capacitor cannot be used if you are not continually switching the FET. This fact is sometimes glossed over in the datasheets for MOSFET drivers.

#### P-channel MOSFETs
P-channel MOSFETs switch the "high side" of a load. They are typically used with Source tied to the positive supply rail, and Drain tied to the high side of the load. When a voltage lower than the source (supply voltage) is applied to the gate, the MOSFET is turned on. This makes their control with a microcontroller somewhat awkward if the MOSFET is to switch a higher voltage than the microcontroller's operating voltage - to turn it off, the gate voltage must be equal to the source voltage. This is normally done using a small N-channel MOSFET to switch the gate itself - however in this case, care must be taken that the maximum Vgs rating is not exceeded.

## "floating" gates
A MOSFET does not include any mechanism to ensure that the voltage on the gate, in the absence of input, is equal to the source (ie, Vgs=0 and MOSFET off). If you do not provide such a mechanism, then - like a "floating" input to a microcontroller - the gate will pick up ambient electrical noise and the FET will turn on and off randomly. The simple solution to this is to include a small resistor between the gate and source, termed a "pull-down" resistor (or "pull-up" resistor for P-channel MOSFETs). *All MOSFET breakout boards sold by Azduino include a 10k resistor for this purpose*.

## Vgs and Rds(on)
As noted above, an Rds(on) is typically specified for at least two values of Vgs, sometimes three, as well as a Vgs(th) and a maximum Vgs. The Vgs voltages for which an Rds(on) is provided usually correspond to a fraction of a volt below common "logic level" voltages, to compensate for a variety of factors. 2.5V or 2.8V is appropriate for 3.3V logic levels, 4.5V for 5V logic, 1.8V for 2.5V logic, and 10V for "standard voltage" (12V logic, from way back in the day). To turn on a MOSFET, you should apply a voltage higher than the lowest Vgs for which an Rds(on) is specified; this voltage must be lower than the maximum Vgs. 

The typical performance curve for a MOSFET has decreasing Rds(on) as Vgs is increased - but beyond a certain point, there is no further improvement to be had. Voltages between the highest Vgs for which Rds(on) is specified and the maximum Vgs will offer little further reduction in on-state resistance. 

### Standard (10V) voltage MOSFETs and 5v logic
It is surprisingly common to see standard voltage MOSFETs (where Rds(on) is not specified below Vgs=10V) marketed towards Arduino users. They are not suitable for this application. They get away with this for a few reasons; First off, the MOSFETs are close enough to "on" with 5v on the gate that they will work for non-demanding use cases - and most Arduino use cases aren't very demanding. Second, most Arduino users are not sufficiently familiar with MOSFETs to recognize that the seller was marketing the product dishonestly even when they do have problems - they just know that their FETs keep overheating. Finally, the sellers are insulated from disatisfied customers since most are located overseas. The prevalence of these boards - and the fact that you can just *forget* about trying to use one on a 3.3V microcontroller - was the impetus for creating our 4-channel MOSFET boards.

